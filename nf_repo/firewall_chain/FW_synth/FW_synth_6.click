/** NAT going to: NF_1,netmap:ns1veth0, BURST 32, METHOD NETMAP **/
iprw1::IPRewriter(pattern 11.0.0.1 1024-65535 - - 1 0, DEC_IP_TTL false, CALC_CHECKSUM true);
iprw1[1] -> EtherEncap(0x0800, $macAddr0, $gwMACAddr0) -> Queue ($queueSize) -> ToDevice ($iface0, BURST 32, METHOD NETMAP);
iprw1[0] -> Discard ();

/** NAT going to: NF_6,netmap:ns6veth1, BURST 32, METHOD NETMAP **/
iprw0::IPRewriter(pattern - - - - 2 0, pattern - - - - 2 0, pattern - - - - 2 0, pattern - - - - 2 0, pattern - - - - 2 0, pattern - - - - 2 0, pattern 15.0.0.1 1024-65535 - - 2 1, pattern 15.0.0.1 1024-65535 - - 2 1, pattern 15.0.0.1 1024-65535 - - 2 1, pattern 15.0.0.1 1024-65535 - - 2 1, DEC_IP_TTL false, CALC_CHECKSUM true);
iprw0[2] -> EtherEncap(0x0800, $macAddr1, $gwMACAddr1) -> Queue ($queueSize) -> ToDevice ($iface1, BURST 32, METHOD NETMAP);
iprw0[0] -> Discard ();
iprw0[1] -> Discard ();

ipc0 :: IPClassifier (
	((dst net 0.0.0.0/5) || (dst net 8.0.0.0/6) || (dst net 12.0.0.0/7) || (dst net 14.0.0.0/8) || (dst net 15.0.1.0/24) || (dst net 15.0.2.0/23) || (dst net 15.0.4.0/22) || (dst net 15.0.8.0/21) || (dst net 15.0.16.0/20) || (dst net 15.0.32.0/19) || (dst net 15.0.64.0/18) || (dst net 15.0.128.0/17) || (dst net 15.1.0.0/16) || (dst net 15.2.0.0/15) || (dst net 15.4.0.0/14) || (dst net 15.8.0.0/13) || (dst net 15.16.0.0/12) || (dst net 15.32.0.0/11) || (dst net 15.64.0.0/10) || (dst net 15.128.0.0/9) || (dst net 16.0.0.0/4) || (dst net 32.0.0.0/3) || (dst net 64.0.0.0/2) || (dst net 128.0.0.0/2) || (dst net 192.0.0.0/5) || (dst net 200.0.1.0/24) || (dst net 200.0.2.0/23) || (dst net 200.0.4.0/22) || (dst net 200.0.8.0/21) || (dst net 200.0.16.0/20) || (dst net 200.0.32.0/19) || (dst net 200.0.64.0/18) || (dst net 200.0.128.0/17) || (dst net 200.1.0.0/16) || (dst net 200.2.0.0/15) || (dst net 200.4.0.0/14) || (dst net 200.8.0.0/13) || (dst net 200.16.0.0/12) || (dst net 200.32.0.0/11) || (dst net 200.64.0.0/10) || (dst net 200.128.0.0/9) || (dst net 201.0.0.0/8) || (dst net 202.0.0.0/7) || (dst net 204.0.0.0/6) || (dst net 208.0.0.0/4) || (dst net 224.0.0.0/3)) && ((ip proto 17)),
	((dst net 200.0.0.2/31) || (dst net 200.0.0.4/30) || (dst net 200.0.0.8/29) || (dst net 200.0.0.16/28) || (dst net 200.0.0.32/27) || (dst net 200.0.0.64/26) || (dst net 200.0.0.128/26) || (dst net 200.0.0.192/27) || (dst net 200.0.0.224/28) || (dst net 200.0.0.240/29) || (dst net 200.0.0.248/30) || (dst net 200.0.0.252/31) || (dst net 200.0.0.254/32)) && ((ip proto 17)),
	((dst net 0.0.0.0/5) || (dst net 8.0.0.0/6) || (dst net 12.0.0.0/7) || (dst net 14.0.0.0/8) || (dst net 15.0.1.0/24) || (dst net 15.0.2.0/23) || (dst net 15.0.4.0/22) || (dst net 15.0.8.0/21) || (dst net 15.0.16.0/20) || (dst net 15.0.32.0/19) || (dst net 15.0.64.0/18) || (dst net 15.0.128.0/17) || (dst net 15.1.0.0/16) || (dst net 15.2.0.0/15) || (dst net 15.4.0.0/14) || (dst net 15.8.0.0/13) || (dst net 15.16.0.0/12) || (dst net 15.32.0.0/11) || (dst net 15.64.0.0/10) || (dst net 15.128.0.0/9) || (dst net 16.0.0.0/4) || (dst net 32.0.0.0/3) || (dst net 64.0.0.0/2) || (dst net 128.0.0.0/2) || (dst net 192.0.0.0/5) || (dst net 200.0.1.0/24) || (dst net 200.0.2.0/23) || (dst net 200.0.4.0/22) || (dst net 200.0.8.0/21) || (dst net 200.0.16.0/20) || (dst net 200.0.32.0/19) || (dst net 200.0.64.0/18) || (dst net 200.0.128.0/17) || (dst net 200.1.0.0/16) || (dst net 200.2.0.0/15) || (dst net 200.4.0.0/14) || (dst net 200.8.0.0/13) || (dst net 200.16.0.0/12) || (dst net 200.32.0.0/11) || (dst net 200.64.0.0/10) || (dst net 200.128.0.0/9) || (dst net 201.0.0.0/8) || (dst net 202.0.0.0/7) || (dst net 204.0.0.0/6) || (dst net 208.0.0.0/4) || (dst net 224.0.0.0/3)) && ((src net 15.0.0.0/24)) && ((ip proto 17)),
	((dst net 200.0.0.2/31) || (dst net 200.0.0.4/30) || (dst net 200.0.0.8/29) || (dst net 200.0.0.16/28) || (dst net 200.0.0.32/27) || (dst net 200.0.0.64/26) || (dst net 200.0.0.128/26) || (dst net 200.0.0.192/27) || (dst net 200.0.0.224/28) || (dst net 200.0.0.240/29) || (dst net 200.0.0.248/30) || (dst net 200.0.0.252/31) || (dst net 200.0.0.254/32)) && ((src net 15.0.0.0/24)) && ((ip proto 17)),
	((dst net 0.0.0.0/5) || (dst net 8.0.0.0/6) || (dst net 12.0.0.0/7) || (dst net 14.0.0.0/8) || (dst net 15.0.1.0/24) || (dst net 15.0.2.0/23) || (dst net 15.0.4.0/22) || (dst net 15.0.8.0/21) || (dst net 15.0.16.0/20) || (dst net 15.0.32.0/19) || (dst net 15.0.64.0/18) || (dst net 15.0.128.0/17) || (dst net 15.1.0.0/16) || (dst net 15.2.0.0/15) || (dst net 15.4.0.0/14) || (dst net 15.8.0.0/13) || (dst net 15.16.0.0/12) || (dst net 15.32.0.0/11) || (dst net 15.64.0.0/10) || (dst net 15.128.0.0/9) || (dst net 16.0.0.0/4) || (dst net 32.0.0.0/3) || (dst net 64.0.0.0/2) || (dst net 128.0.0.0/2) || (dst net 192.0.0.0/5) || (dst net 200.0.1.0/24) || (dst net 200.0.2.0/23) || (dst net 200.0.4.0/22) || (dst net 200.0.8.0/21) || (dst net 200.0.16.0/20) || (dst net 200.0.32.0/19) || (dst net 200.0.64.0/18) || (dst net 200.0.128.0/17) || (dst net 200.1.0.0/16) || (dst net 200.2.0.0/15) || (dst net 200.4.0.0/14) || (dst net 200.8.0.0/13) || (dst net 200.16.0.0/12) || (dst net 200.32.0.0/11) || (dst net 200.64.0.0/10) || (dst net 200.128.0.0/9) || (dst net 201.0.0.0/8) || (dst net 202.0.0.0/7) || (dst net 204.0.0.0/6) || (dst net 208.0.0.0/4) || (dst net 224.0.0.0/3)) && ((src net 200.0.0.0/24)) && ((ip proto 1)),
	((dst net 200.0.0.2/31) || (dst net 200.0.0.4/30) || (dst net 200.0.0.8/29) || (dst net 200.0.0.16/28) || (dst net 200.0.0.32/27) || (dst net 200.0.0.64/26) || (dst net 200.0.0.128/26) || (dst net 200.0.0.192/27) || (dst net 200.0.0.224/28) || (dst net 200.0.0.240/29) || (dst net 200.0.0.248/30) || (dst net 200.0.0.252/31) || (dst net 200.0.0.254/32)) && ((src net 200.0.0.0/24)) && ((ip proto 1)),
);
ipc0[0] -> DropBroadcasts() -> IPGWOptions($ipAddr) -> [0]iprw0;
ipc0[1] -> DropBroadcasts() -> IPGWOptions($ipAddr) -> [1]iprw0;
ipc0[2] -> DropBroadcasts() -> IPGWOptions($ipAddr) -> [2]iprw0;
ipc0[3] -> DropBroadcasts() -> IPGWOptions($ipAddr) -> [3]iprw0;
ipc0[4] -> DropBroadcasts() -> IPGWOptions($ipAddr) -> [4]iprw0;
ipc0[5] -> DropBroadcasts() -> IPGWOptions($ipAddr) -> [5]iprw0;
FromDevice (NF_6,netmap:ns6veth1) -> Strip(14) -> MarkIPHeader() -> ipc0;
ipc2 :: IPClassifier (
	((ip proto 17)) && ((dst net 0.0.0.0/5) || (dst net 8.0.0.0/7) || (dst net 10.0.1.0/24) || (dst net 10.0.2.0/23) || (dst net 10.0.4.0/22) || (dst net 10.0.8.0/21) || (dst net 10.0.16.0/20) || (dst net 10.0.32.0/19) || (dst net 10.0.64.0/18) || (dst net 10.0.128.0/17) || (dst net 10.1.0.0/16) || (dst net 10.2.0.0/15) || (dst net 10.4.0.0/14) || (dst net 10.8.0.0/13) || (dst net 10.16.0.0/12) || (dst net 10.32.0.0/11) || (dst net 10.64.0.0/10) || (dst net 10.128.0.0/9) || (dst net 11.0.1.0/24) || (dst net 11.0.2.0/23) || (dst net 11.0.4.0/22) || (dst net 11.0.8.0/21) || (dst net 11.0.16.0/20) || (dst net 11.0.32.0/19) || (dst net 11.0.64.0/18) || (dst net 11.0.128.0/17) || (dst net 11.1.0.0/16) || (dst net 11.2.0.0/15) || (dst net 11.4.0.0/14) || (dst net 11.8.0.0/13) || (dst net 11.16.0.0/12) || (dst net 11.32.0.0/11) || (dst net 11.64.0.0/10) || (dst net 11.128.0.0/9) || (dst net 12.0.1.0/24) || (dst net 12.0.2.0/23) || (dst net 12.0.4.0/22) || (dst net 12.0.8.0/21) || (dst net 12.0.16.0/20) || (dst net 12.0.32.0/19) || (dst net 12.0.64.0/18) || (dst net 12.0.128.0/17) || (dst net 12.1.0.0/16) || (dst net 12.2.0.0/15) || (dst net 12.4.0.0/14) || (dst net 12.8.0.0/13) || (dst net 12.16.0.0/12) || (dst net 12.32.0.0/11) || (dst net 12.64.0.0/10) || (dst net 12.128.0.0/9) || (dst net 13.0.1.0/24) || (dst net 13.0.2.0/23) || (dst net 13.0.4.0/22) || (dst net 13.0.8.0/21) || (dst net 13.0.16.0/20) || (dst net 13.0.32.0/19) || (dst net 13.0.64.0/18) || (dst net 13.0.128.0/17) || (dst net 13.1.0.0/16) || (dst net 13.2.0.0/15) || (dst net 13.4.0.0/14) || (dst net 13.8.0.0/13) || (dst net 13.16.0.0/12) || (dst net 13.32.0.0/11) || (dst net 13.64.0.0/10) || (dst net 13.128.0.0/9) || (dst net 14.0.1.0/24) || (dst net 14.0.2.0/23) || (dst net 14.0.4.0/22) || (dst net 14.0.8.0/21) || (dst net 14.0.16.0/20) || (dst net 14.0.32.0/19) || (dst net 14.0.64.0/18) || (dst net 14.0.128.0/17) || (dst net 14.1.0.0/16) || (dst net 14.2.0.0/15) || (dst net 14.4.0.0/14) || (dst net 14.8.0.0/13) || (dst net 14.16.0.0/12) || (dst net 14.32.0.0/11) || (dst net 14.64.0.0/10) || (dst net 14.128.0.0/9) || (dst net 15.0.1.0/24) || (dst net 15.0.2.0/23) || (dst net 15.0.4.0/22) || (dst net 15.0.8.0/21) || (dst net 15.0.16.0/20) || (dst net 15.0.32.0/19) || (dst net 15.0.64.0/18) || (dst net 15.0.128.0/17) || (dst net 15.1.0.0/16) || (dst net 15.2.0.0/15) || (dst net 15.4.0.0/14) || (dst net 15.8.0.0/13) || (dst net 15.16.0.0/12) || (dst net 15.32.0.0/11) || (dst net 15.64.0.0/10) || (dst net 15.128.0.0/9) || (dst net 16.0.0.0/4) || (dst net 32.0.0.0/3) || (dst net 64.0.0.0/2) || (dst net 128.0.0.0/2) || (dst net 192.0.0.0/5) || (dst net 200.0.1.0/24) || (dst net 200.0.2.0/23) || (dst net 200.0.4.0/22) || (dst net 200.0.8.0/21) || (dst net 200.0.16.0/20) || (dst net 200.0.32.0/19) || (dst net 200.0.64.0/18) || (dst net 200.0.128.0/17) || (dst net 200.1.0.0/16) || (dst net 200.2.0.0/15) || (dst net 200.4.0.0/14) || (dst net 200.8.0.0/13) || (dst net 200.16.0.0/12) || (dst net 200.32.0.0/11) || (dst net 200.64.0.0/10) || (dst net 200.128.0.0/9) || (dst net 201.0.0.0/8) || (dst net 202.0.0.0/7) || (dst net 204.0.0.0/6) || (dst net 208.0.0.0/4) || (dst net 224.0.0.0/3)),
	((ip proto 17)) && ((dst net 200.0.0.2/31) || (dst net 200.0.0.4/30) || (dst net 200.0.0.8/29) || (dst net 200.0.0.16/28) || (dst net 200.0.0.32/27) || (dst net 200.0.0.64/26) || (dst net 200.0.0.128/26) || (dst net 200.0.0.192/27) || (dst net 200.0.0.224/28) || (dst net 200.0.0.240/29) || (dst net 200.0.0.248/30) || (dst net 200.0.0.252/31) || (dst net 200.0.0.254/32)),
	((ip proto 17)) && ((dst net 0.0.0.0/5) || (dst net 8.0.0.0/7) || (dst net 10.0.1.0/24) || (dst net 10.0.2.0/23) || (dst net 10.0.4.0/22) || (dst net 10.0.8.0/21) || (dst net 10.0.16.0/20) || (dst net 10.0.32.0/19) || (dst net 10.0.64.0/18) || (dst net 10.0.128.0/17) || (dst net 10.1.0.0/16) || (dst net 10.2.0.0/15) || (dst net 10.4.0.0/14) || (dst net 10.8.0.0/13) || (dst net 10.16.0.0/12) || (dst net 10.32.0.0/11) || (dst net 10.64.0.0/10) || (dst net 10.128.0.0/9) || (dst net 11.0.1.0/24) || (dst net 11.0.2.0/23) || (dst net 11.0.4.0/22) || (dst net 11.0.8.0/21) || (dst net 11.0.16.0/20) || (dst net 11.0.32.0/19) || (dst net 11.0.64.0/18) || (dst net 11.0.128.0/17) || (dst net 11.1.0.0/16) || (dst net 11.2.0.0/15) || (dst net 11.4.0.0/14) || (dst net 11.8.0.0/13) || (dst net 11.16.0.0/12) || (dst net 11.32.0.0/11) || (dst net 11.64.0.0/10) || (dst net 11.128.0.0/9) || (dst net 12.0.1.0/24) || (dst net 12.0.2.0/23) || (dst net 12.0.4.0/22) || (dst net 12.0.8.0/21) || (dst net 12.0.16.0/20) || (dst net 12.0.32.0/19) || (dst net 12.0.64.0/18) || (dst net 12.0.128.0/17) || (dst net 12.1.0.0/16) || (dst net 12.2.0.0/15) || (dst net 12.4.0.0/14) || (dst net 12.8.0.0/13) || (dst net 12.16.0.0/12) || (dst net 12.32.0.0/11) || (dst net 12.64.0.0/10) || (dst net 12.128.0.0/9) || (dst net 13.0.1.0/24) || (dst net 13.0.2.0/23) || (dst net 13.0.4.0/22) || (dst net 13.0.8.0/21) || (dst net 13.0.16.0/20) || (dst net 13.0.32.0/19) || (dst net 13.0.64.0/18) || (dst net 13.0.128.0/17) || (dst net 13.1.0.0/16) || (dst net 13.2.0.0/15) || (dst net 13.4.0.0/14) || (dst net 13.8.0.0/13) || (dst net 13.16.0.0/12) || (dst net 13.32.0.0/11) || (dst net 13.64.0.0/10) || (dst net 13.128.0.0/9) || (dst net 14.0.1.0/24) || (dst net 14.0.2.0/23) || (dst net 14.0.4.0/22) || (dst net 14.0.8.0/21) || (dst net 14.0.16.0/20) || (dst net 14.0.32.0/19) || (dst net 14.0.64.0/18) || (dst net 14.0.128.0/17) || (dst net 14.1.0.0/16) || (dst net 14.2.0.0/15) || (dst net 14.4.0.0/14) || (dst net 14.8.0.0/13) || (dst net 14.16.0.0/12) || (dst net 14.32.0.0/11) || (dst net 14.64.0.0/10) || (dst net 14.128.0.0/9) || (dst net 15.0.1.0/24) || (dst net 15.0.2.0/23) || (dst net 15.0.4.0/22) || (dst net 15.0.8.0/21) || (dst net 15.0.16.0/20) || (dst net 15.0.32.0/19) || (dst net 15.0.64.0/18) || (dst net 15.0.128.0/17) || (dst net 15.1.0.0/16) || (dst net 15.2.0.0/15) || (dst net 15.4.0.0/14) || (dst net 15.8.0.0/13) || (dst net 15.16.0.0/12) || (dst net 15.32.0.0/11) || (dst net 15.64.0.0/10) || (dst net 15.128.0.0/9) || (dst net 16.0.0.0/4) || (dst net 32.0.0.0/3) || (dst net 64.0.0.0/2) || (dst net 128.0.0.0/2) || (dst net 192.0.0.0/5) || (dst net 200.0.1.0/24) || (dst net 200.0.2.0/23) || (dst net 200.0.4.0/22) || (dst net 200.0.8.0/21) || (dst net 200.0.16.0/20) || (dst net 200.0.32.0/19) || (dst net 200.0.64.0/18) || (dst net 200.0.128.0/17) || (dst net 200.1.0.0/16) || (dst net 200.2.0.0/15) || (dst net 200.4.0.0/14) || (dst net 200.8.0.0/13) || (dst net 200.16.0.0/12) || (dst net 200.32.0.0/11) || (dst net 200.64.0.0/10) || (dst net 200.128.0.0/9) || (dst net 201.0.0.0/8) || (dst net 202.0.0.0/7) || (dst net 204.0.0.0/6) || (dst net 208.0.0.0/4) || (dst net 224.0.0.0/3)),
	((ip proto 17)) && ((dst net 200.0.0.2/31) || (dst net 200.0.0.4/30) || (dst net 200.0.0.8/29) || (dst net 200.0.0.16/28) || (dst net 200.0.0.32/27) || (dst net 200.0.0.64/26) || (dst net 200.0.0.128/26) || (dst net 200.0.0.192/27) || (dst net 200.0.0.224/28) || (dst net 200.0.0.240/29) || (dst net 200.0.0.248/30) || (dst net 200.0.0.252/31) || (dst net 200.0.0.254/32)),
	((dst net 10.0.0.2/31) || (dst net 10.0.0.4/30) || (dst net 10.0.0.8/29) || (dst net 10.0.0.16/28) || (dst net 10.0.0.32/27) || (dst net 10.0.0.64/26) || (dst net 10.0.0.128/26) || (dst net 10.0.0.192/27) || (dst net 10.0.0.224/28) || (dst net 10.0.0.240/29) || (dst net 10.0.0.248/30) || (dst net 10.0.0.252/31) || (dst net 10.0.0.254/32)),
);
ipc2[0] -> DropBroadcasts() -> IPGWOptions($ipAddr0) -> [6]iprw0;
ipc2[1] -> DropBroadcasts() -> IPGWOptions($ipAddr0) -> [7]iprw0;
ipc2[2] -> DropBroadcasts() -> IPGWOptions($ipAddr0) -> [8]iprw0;
ipc2[3] -> DropBroadcasts() -> IPGWOptions($ipAddr0) -> [9]iprw0;
ipc2[4] -> DropBroadcasts() -> IPGWOptions($ipAddr0) -> [0]iprw1;
FromDevice ($iface0) -> Strip(14) -> MarkIPHeader() -> ipc2;

